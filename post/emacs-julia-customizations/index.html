<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Emacs customizations for julia-mode</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="Hugo 0.27.1" />
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <link rel="stylesheet" type="text/css" href="../../css/lovelace.css">
    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          displayMath: [['$$','$$'], ['\[','\]']],
          processEscapes: true,
          processEnvironments: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
          TeX: { equationNumbers: { autoNumber: "AMS" },
               extensions: ["AMSmath.js", "AMSsymbols.js"] }
        }
      });
    </script>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  <body>
    <nav id="navbar">
      <a href="http://tpapp.github.io/">About</a>
<a href="http://tpapp.github.io/research">Research</a>
<a href="http://tpapp.github.io/post">Blog</a>
<a href="http://tpapp.github.io/software">Software</a>
<a href="https://github.com/tpapp/">Github</a>

    </nav>
    <div id="navbarplaceholder">
      <a href="http://tpapp.github.io/">About</a>
<a href="http://tpapp.github.io/research">Research</a>
<a href="http://tpapp.github.io/post">Blog</a>
<a href="http://tpapp.github.io/software">Software</a>
<a href="https://github.com/tpapp/">Github</a>

    </div>
    <div id="mainbody">
<div id="sidebar">
  
  <a href="../../tags/bayesian">bayesian</a>
  
  <a href="../../tags/blogging">blogging</a>
  
  <a href="../../tags/browser-plugins">browser-plugins</a>
  
  <a href="../../tags/economics">economics</a>
  
  <a href="../../tags/emacs">emacs</a>
  
  <a href="../../tags/emacs-emacs25-ubuntu">emacs-emacs25-ubuntu</a>
  
  <a href="../../tags/firefox">firefox</a>
  
  <a href="../../tags/hugo">hugo</a>
  
  <a href="../../tags/jacobian">jacobian</a>
  
  <a href="../../tags/julia">julia</a>
  
  <a href="../../tags/latex">latex</a>
  
  <a href="../../tags/log1p">log1p</a>
  
  <a href="../../tags/math">math</a>
  
  <a href="../../tags/mcmc">mcmc</a>
  
  <a href="../../tags/my-packages">my-packages</a>
  
  <a href="../../tags/numerical-error">numerical-error</a>
  
  <a href="../../tags/numerical-methods">numerical-methods</a>
  
  <a href="../../tags/packages">packages</a>
  
  <a href="../../tags/stan">stan</a>
  
  <a href="../../tags/teaching">teaching</a>
  
  <a href="../../tags/tutorial">tutorial</a>
  
  <a href="../../tags/weave">weave</a>
  
</div>

<div id="content">
<h1>Emacs customizations for julia-mode</h1>2017/08/28
<span class="tags">
    
    <a href="../../tags/julia">julia</a>
    
    <a href="../../tags/emacs">emacs</a>
    
</span>





<p>I find the following customizations very useful for <em>editing</em> Julia
code in Emacs. Add them to <code>julia-mode-hook</code>, eg</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">customize-julia-mode</span> <span class="p">()</span>
  <span class="s">&quot;Customize julia-mode.&quot;</span>
  <span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
  <span class="c1">;; my customizations go here</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;julia-mode-hook</span> <span class="ss">&#39;customize-julia-mode</span><span class="p">)</span>
</code></pre></div>

<h2 id="highlight-fixme-todo">Highlight FIXME/TODO/&hellip;</h2>

<p>When I just want to note something in a comment for future reference,
I prefer to have certain words highlighted. You can use something like
this:</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nv">font-lock-add-keywords</span> <span class="no">nil</span>
                        <span class="o">&#39;</span><span class="p">((</span><span class="s">&quot;\\&lt;\\(FIXME\\|TODO\\|QUESTION\\|NOTE\\)&quot;</span>
                        <span class="mi">1</span> <span class="nv">font-lock-warning-face</span> <span class="no">t</span><span class="p">)))</span>
</code></pre></div>

<p>This is what it looks like:</p>

<p><img src="todo.png" style="height:6em"></p>

<h2 id="highlight-symbols">Highlight symbols</h2>

<p>After</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;highlight-symbol</span><span class="p">)</span>
</code></pre></div>

<p>add a hook for</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nv">local-set-key</span> <span class="p">[(</span><span class="nv">control</span> <span class="sc">?c</span><span class="p">)</span> <span class="sc">?s</span><span class="p">]</span> <span class="ss">&#39;highlight-symbol-at-point</span><span class="p">)</span>
<span class="p">(</span><span class="nv">local-set-key</span> <span class="p">[(</span><span class="nv">control</span> <span class="sc">?c</span><span class="p">)</span> <span class="sc">?n</span><span class="p">]</span> <span class="ss">&#39;highlight-symbol-next</span><span class="p">)</span>
<span class="p">(</span><span class="nv">local-set-key</span> <span class="p">[(</span><span class="nv">control</span> <span class="sc">?c</span><span class="p">)</span> <span class="sc">?p</span><span class="p">]</span> <span class="ss">&#39;highlight-symbol-prev</span><span class="p">)</span>
</code></pre></div>

<p>This highlights symbols with <code>C-c s</code>:</p>

<p><img src="highlight.png" style="height:12em"></p>

<h2 id="fill-docstrings">Fill docstrings</h2>

<p>This is useful if you want to use <code>M-q</code> on docstrings.</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">julia-fill-string</span> <span class="p">()</span>
  <span class="s">&quot;Fill a docstring, preserving newlines before and after triple quotation marks.&quot;</span>
  <span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="k">and</span> <span class="nv">transient-mark-mode</span> <span class="nv">mark-active</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">fill-region</span> <span class="p">(</span><span class="nf">region-beginning</span><span class="p">)</span> <span class="p">(</span><span class="nf">region-end</span><span class="p">)</span> <span class="no">nil</span> <span class="no">t</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">cl-flet</span> <span class="p">((</span><span class="nv">fill-if-string</span> <span class="p">()</span>
                              <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nf">looking-at</span> <span class="p">(</span><span class="nb">rx</span> <span class="s">&quot;\&quot;\&quot;\&quot;&quot;</span>
                                                        <span class="p">(</span><span class="nv">group</span>
                                                         <span class="p">(</span><span class="nv">*?</span> <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nv">any</span> <span class="s">&quot;\\&quot;</span><span class="p">))</span>
                                                                 <span class="p">(</span><span class="nv">seq</span> <span class="s">&quot;\\&quot;</span> <span class="nv">anything</span><span class="p">))))</span>
                                                        <span class="s">&quot;\&quot;\&quot;\&quot;&quot;</span><span class="p">))</span>
                                        <span class="p">(</span><span class="nf">looking-at</span> <span class="p">(</span><span class="nb">rx</span> <span class="s">&quot;\&quot;&quot;</span>
                                                        <span class="p">(</span><span class="nv">group</span>
                                                         <span class="p">(</span><span class="nv">*?</span> <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nv">any</span> <span class="s">&quot;\\&quot;</span><span class="p">))</span>
                                                                 <span class="p">(</span><span class="nv">seq</span> <span class="s">&quot;\\&quot;</span> <span class="nv">anything</span><span class="p">))))</span>
                                                        <span class="s">&quot;\&quot;&quot;</span><span class="p">)))</span>
                                <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">start</span> <span class="p">(</span><span class="nf">match-beginning</span> <span class="mi">1</span><span class="p">))</span>
                                      <span class="p">(</span><span class="nv">end</span> <span class="p">(</span><span class="nf">match-end</span> <span class="mi">1</span><span class="p">)))</span>
                                  <span class="c1">;; (ess-blink-region start end)</span>
                                  <span class="p">(</span><span class="nv">fill-region</span> <span class="nv">start</span> <span class="nv">end</span> <span class="no">nil</span> <span class="no">nil</span> <span class="no">nil</span><span class="p">)))))</span>
      <span class="p">(</span><span class="k">save-excursion</span>
        <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">s</span> <span class="p">(</span><span class="nv">syntax-ppss</span><span class="p">)))</span>
          <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">fourth</span> <span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nv">ninth</span> <span class="nv">s</span><span class="p">))))</span>
        <span class="p">(</span><span class="nv">fill-if-string</span><span class="p">)))))</span>
</code></pre></div>

<p>Add</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nv">local-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;M-q&quot;</span><span class="p">)</span> <span class="ss">&#39;julia-fill-string</span><span class="p">)</span>
</code></pre></div>

<p>to the mode hook.</p>

<h2 id="highlight-things-after-column-80">Highlight things after column 80</h2>

<p>I add this to the mode hook:</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nv">set-fill-column</span> <span class="mi">80</span><span class="p">)</span>
</code></pre></div>

<p>I also use <code>whitespace</code> globally:</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;whitespace</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">whitespace-style</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">face</span> <span class="nv">empty</span> <span class="nv">tabs</span> <span class="nv">lines-tail</span> <span class="nv">trailing</span><span class="p">))</span>
<span class="p">(</span><span class="nv">global-whitespace-mode</span> <span class="no">t</span><span class="p">)</span>
</code></pre></div>

<p>This is what it looks like:</p>

<p><img src="longlines.png" style="height:4em"></p>

<h2 id="hungry-delete-mode">Hungry delete-mode</h2>

<p>Add this to the mode hook:</p>
<div class="highlight"><pre><code class="language-emacs-lisp" data-lang="emacs-lisp"><span></span><span class="p">(</span><span class="nv">hungry-delete-mode</span><span class="p">)</span>
</code></pre></div>

<p>and then backspace and delete will remove all whitespace near the point in the relevant direction.</p>

<p>In case you are wondering, the theme is <a href="https://github.com/alezost/alect-themes">alect-light</a>.</p>



<div id="pagenav">
  
  <span class="pagenav-label">Previous</span>
  <a href="http://tpapp.github.io/post/julia-local-test/">Local packages in a separate directory in Julia</a>
  
  
  <span class="pagenav-label">Next</span>
  <a href="http://tpapp.github.io/post/log1p/">log1p in Julia</a>
  
</div>

<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "tpappgithubio" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </div>
  </body>
</html>

